import './polyfills.server.mjs';
import{a as z,b as D,c as G}from"./chunk-VGYVVEOG.mjs";import{a as V}from"./chunk-42AZEZWU.mjs";import{a as $}from"./chunk-3VHGSHZI.mjs";import{a as O}from"./chunk-6CZ3X3YV.mjs";import{a as M}from"./chunk-4XATVAYT.mjs";import{a as j}from"./chunk-DT7VC5PF.mjs";import"./chunk-GTSSCL6B.mjs";import{l as N}from"./chunk-J3RQJEQU.mjs";import{a as B}from"./chunk-NB7EFTHI.mjs";import"./chunk-2YB4PSYQ.mjs";import{I,l as A}from"./chunk-CCZ5EHHU.mjs";import{Hb as p,Ib as d,Ma as b,Pb as k,Qa as o,Qb as w,Rb as x,Vb as g,Xb as f,Y as s,aa as S,fb as y,hb as u,ka as C,la as P,lb as T,mb as F,nb as v,ob as _,pb as r,qb as c,rb as m,ub as L,yb as h,zb as E}from"./chunk-TWUG5E64.mjs";import"./chunk-VVCT4QZE.mjs";var U=(e,t)=>t.id,q=e=>({itemsPerPage:15,currentPage:e}),H=e=>["/details",e],J=()=>[1,2,3,4,5];function K(e,t){e&1&&m(0,"i",12)}function Q(e,t){e&1&&m(0,"i",13)}function W(e,t){if(e&1){let a=L();r(0,"div",3)(1,"div",6)(2,"div",7),m(3,"img",8),r(4,"h3",9),p(5),c(),r(6,"h4",10),p(7),g(8,"splittext"),c(),r(9,"div",11)(10,"span",10),p(11),g(12,"currency"),c(),r(13,"div"),v(14,K,1,0,"i",12,F),y(16,Q,1,0,"i",13),r(17,"span",14),p(18),c()()()(),r(19,"button",15),h("click",function(){let n=C(a).$implicit,l=E();return P(l.addCart(n.id))}),p(20," Add to cart "),r(21,"span"),m(22,"i",16),c()()()()}if(e&2){let a=t.$implicit;o(2),u("routerLink",x(13,H,a._id)),o(),u("src",a.imageCover,b),o(2),d(a.category.name),o(2),d(f(8,7,a.title,2)),o(4),d(f(12,10,a.price,"EGP")),o(3),_(w(15,J).slice(0,a.ratingsAverage)),o(2),T(16,a.ratingsAverage%1!=0?16:-1),o(2),d(a.ratingsAverage)}}var ge=(()=>{let t=class t{constructor(){this.ProductService=s($),this._CategoriesService=s(O),this._AuthService=s(B),this._ToastrService=s(j),this.productList=[],this.page=1,this.nextPage=0,this._CartService=s(M)}ngOnInit(){this.getAllProductSub=this.ProductService.getAllProduct().subscribe({next:i=>{this.productList=i.data,console.log(i.metadata),this.pageSize=i.metadata.limit,this.nextPage=Number(i.metadata.nextPage),this.totalLength=i.metadata.numberOfPages},error:i=>{console.log(i)}})}addCart(i){this._CartService.addProudactToCart(i).subscribe({next:n=>{console.log(n),this._ToastrService.success("Product added to your cart"),this._CartService.cartNumber.set(n.numOfCartItems),console.log(this._CartService.cartNumber)},error:n=>{console.log(n)}})}};t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=S({type:t,selectors:[["app-product"]],standalone:!0,features:[k],decls:9,vars:7,consts:[[1,"container"],[1,"p-2"],[1,"row","g-2"],[1,"col-md-3"],[1,"pagination","d-flex","justify-content-center"],[3,"pageChange","previousLabel","nextLabel"],[1,"p-2","product"],[1,"cr",3,"routerLink"],["alt","",1,"w-100",3,"src"],[1,"h5","text-main"],[1,"h6"],[1,"d-flex","justify-content-between","align-items-center"],[1,"fas","fa-star","rating-color","fa-xs"],[1,"fa-solid","fa-star-half","rating-color","fa-xs"],[1,"text-muted"],[1,"btn","btn-main","w-100","my-btn",3,"click"],[1,"fa-solid","fa-cart-shopping","fa-sm"]],template:function(n,l){n&1&&(r(0,"section",0)(1,"h2",1),p(2,"Popular Products :"),c(),r(3,"div",2),v(4,W,23,16,"div",3,U),g(6,"paginate"),c(),r(7,"div",4)(8,"pagination-controls",5),h("pageChange",function(R){return l.page=R}),c()()()),n&2&&(o(4),_(f(6,2,l.productList,x(5,q,l.page))),o(4),u("previousLabel","previous")("nextLabel","next"))},dependencies:[I,A,V,N,G,z,D]});let e=t;return e})();export{ge as ProductComponent};
