import './polyfills.server.mjs';
import{a as k}from"./chunk-DT7VC5PF.mjs";import"./chunk-GTSSCL6B.mjs";import{a as T,b as c,c as b,d as y,h as A,i as N,j as q,k as D,m as M}from"./chunk-J3RQJEQU.mjs";import{a as L}from"./chunk-NB7EFTHI.mjs";import"./chunk-2YB4PSYQ.mjs";import{H as F,I as w}from"./chunk-CCZ5EHHU.mjs";import{Hb as r,Ib as E,Pb as x,Qa as a,Y as p,aa as v,fb as d,hb as C,lb as s,pb as i,qb as t,rb as f,yb as S,zb as h}from"./chunk-TWUG5E64.mjs";import"./chunk-VVCT4QZE.mjs";function R(e,n){e&1&&(i(0,"p",13),r(1,"email required"),t())}function V(e,n){e&1&&(i(0,"p",13),r(1,"Enter Valid Email"),t())}function G(e,n){if(e&1&&(i(0,"div",6),d(1,R,2,0,"p",13)(2,V,2,0),t()),e&2){let l,o=h();a(),s(1,(l=o.loginForm.get("email"))!=null&&l.getError("required")?1:(l=o.loginForm.get("email"))!=null&&l.getError("email")?2:-1)}}function B(e,n){e&1&&(i(0,"p",13),r(1,"password required"),t())}function j(e,n){e&1&&(i(0,"p",13),r(1,"Enter Valid password"),t())}function I(e,n){if(e&1&&(i(0,"div",6),d(1,B,2,0,"p",13)(2,j,2,0),t()),e&2){let l,o=h();a(),s(1,(l=o.loginForm.get("password"))!=null&&l.getError("required")?1:(l=o.loginForm.get("password"))!=null&&l.getError("pattern")?2:-1)}}function U(e,n){e&1&&(i(0,"span"),f(1,"i",14),t())}function $(e,n){if(e&1&&(i(0,"p",6),r(1),t()),e&2){let l=h();a(),E(l.msgError)}}function z(e,n){e&1&&(i(0,"h2",12),r(1,"success"),t())}var Y=(()=>{let n=class n{constructor(){this._AuthService=p(L),this._FormBuilder=p(D),this._ToastrService=p(k),this._Router=p(F),this.msgError="",this.isLoding=!1,this.myMassage=!1,this.loginForm=this._FormBuilder.group({email:[null,[c.required,c.email]],password:[null,[c.required,c.pattern(/^\w{6,}$/gm)]]})}loginSubmint(){this.loginForm.valid?(this.isLoding=!0,this._AuthService.setlonginForm(this.loginForm.value).subscribe({next:o=>{o.message=="success"&&(this.myMassage=!0,this._ToastrService.success("welcome","FreshCart"),localStorage.setItem("userToken",o.token),this._AuthService.saveUserData(),console.log(this._AuthService.userData.id),setTimeout(()=>{this._Router.navigate(["/home"])},1e3)),this.isLoding=!1},error:o=>{this.msgError=o.error.message,this.isLoding=!1}})):(this.loginForm.setErrors({mismatch:!0}),this.loginForm.markAllAsTouched())}};n.\u0275fac=function(g){return new(g||n)},n.\u0275cmp=v({type:n,selectors:[["app-login"]],standalone:!0,features:[x],decls:22,vars:6,consts:[[1,"bg-main-light","shadow","p-2","my-4","rounded-4"],[1,"h2","text-main"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["formControlName","email","id","email","type","email",1,"form-control"],[1,"alert","alert-danger","w-75","m-0"],["for","passwerd"],["formControlName","password","id","passwerd","type","password",1,"form-control"],[1,"d-flex","align-items-center","justify-content-end","gap-4"],["routerLink","/forgot",1,"text-danger","cr"],[1,"btn-main"],[1,"alert","alert-success","w-100","text-center"],[1,"m-0"],[1,"fas","fa-spin","fa-spinner"]],template:function(g,m){if(g&1&&(i(0,"section",0)(1,"h1",1),r(2,"login Now:"),t(),i(3,"form",2),S("ngSubmit",function(){return m.loginSubmint()}),i(4,"div",3)(5,"label",4),r(6,"email :"),t(),f(7,"input",5),d(8,G,3,1,"div",6),t(),i(9,"div",3)(10,"label",7),r(11,"passwerd :"),t(),f(12,"input",8),d(13,I,3,1,"div",6),t(),i(14,"div",9)(15,"a",10),r(16,"forgot password"),t(),i(17,"button",11),r(18,"Login "),d(19,U,2,0,"span"),t()(),d(20,$,2,1,"p",6)(21,z,2,0,"h2",12),t()()),g&2){let u,_;a(3),C("formGroup",m.loginForm),a(5),s(8,(u=m.loginForm.get("email"))!=null&&u.errors&&((u=m.loginForm.get("email"))!=null&&u.touched)?8:-1),a(5),s(13,(_=m.loginForm.get("password"))!=null&&_.errors&&((_=m.loginForm.get("password"))!=null&&_.touched)?13:-1),a(6),s(19,m.isLoding?19:-1),a(),s(20,m.msgError?20:-1),a(),s(21,m.myMassage?21:-1)}},dependencies:[M,A,T,b,y,N,q,w]});let e=n;return e})();export{Y as LoginComponent};
