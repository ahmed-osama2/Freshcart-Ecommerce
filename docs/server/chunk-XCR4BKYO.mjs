import './polyfills.server.mjs';
import{a as A,b as _,c as F,d as I,e as N,f as v,h as k,i as D,j as G,m as j}from"./chunk-J3RQJEQU.mjs";import{a as b}from"./chunk-2YB4PSYQ.mjs";import{E as q,s as T}from"./chunk-CCZ5EHHU.mjs";import{Hb as a,Pb as O,Qa as d,S as x,X as E,Y as C,aa as S,fb as u,hb as y,lb as p,pb as o,qb as n,rb as h,yb as w,zb as g}from"./chunk-TWUG5E64.mjs";import"./chunk-VVCT4QZE.mjs";var M=(()=>{let t=class t{constructor(i){this._HttpClient=i}cheekout(i,s){return this._HttpClient.post(`${b.baseurl}/api/v1/orders/checkout-session/${i}?url=${b.urlserver}`,{shippingAddress:s})}};t.\u0275fac=function(s){return new(s||t)(E(T))},t.\u0275prov=x({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function V(e,t){e&1&&(o(0,"p",11),a(1,"details required"),n())}function $(e,t){if(e&1&&(o(0,"div",5),u(1,V,2,0,"p",11),n()),e&2){let l,i=g();d(),p(1,(l=i.ordras.get("details"))!=null&&l.getError("required")?1:-1)}}function H(e,t){e&1&&(o(0,"p",11),a(1,"phone required"),n())}function z(e,t){e&1&&(o(0,"p",11),a(1,"Enter Valid Egyption phone"),n())}function B(e,t){if(e&1&&(o(0,"div",5),u(1,H,2,0,"p",11)(2,z,2,0),n()),e&2){let l,i=g();d(),p(1,(l=i.ordras.get("phone"))!=null&&l.getError("required")?1:(l=i.ordras.get("phone"))!=null&&l.getError("pattern")?2:-1)}}function J(e,t){e&1&&(o(0,"p",11),a(1,"city required"),n())}function K(e,t){if(e&1&&(o(0,"div",5),u(1,J,2,0,"p",11),n()),e&2){let l,i=g();d(),p(1,(l=i.ordras.get("city"))!=null&&l.getError("required")?1:-1)}}var te=(()=>{let t=class t{constructor(){this._ActivatedRoute=C(q),this._OrderService=C(M),this.cartId="",this.ordras=new N({details:new v(null,[_.required]),phone:new v(null,[_.required,_.pattern(/^01[0125][0-9]{8}$/gm)]),city:new v(null,[_.required])})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:i=>{this.cartId=i.get("id"),console.log(this.cartId)}})}ordersubmit(){this.ordras.valid?(console.log(this.ordras.value),this._OrderService.cheekout(this.cartId,this.ordras.value).subscribe({next:i=>{console.log(i),i.status==="success"&&window.open(i.session.url,"_self")},error:i=>{console.log(i)}})):this.ordras.markAllAsTouched()}};t.\u0275fac=function(s){return new(s||t)},t.\u0275cmp=S({type:t,selectors:[["app-orders"]],standalone:!0,features:[O],decls:21,vars:5,consts:[[1,"container","w-50","m-auto","bg-main-light","rounded-4","shadow","p-2","my-2"],[1,"text-main","h2"],[3,"ngSubmit","formGroup"],["for","details"],["formControlName","details","id","details","type","text",1,"form-control"],[1,"alert","alert-danger","w-100","m-0"],["for","phone"],["formControlName","phone","id","phone","type","tel",1,"form-control"],["for","city"],["formControlName","city","id","city","type","text",1,"form-control"],["type","submit",1,"my-2","btn-main",3,"disabled"],[1,"m-0"]],template:function(s,r){if(s&1&&(o(0,"section",0)(1,"h1",1),a(2,"shipping Address:"),n(),o(3,"form",2),w("ngSubmit",function(){return r.ordersubmit()}),o(4,"div")(5,"label",3),a(6,"Details"),n(),h(7,"input",4),u(8,$,2,1,"div",5),n(),o(9,"div")(10,"label",6),a(11,"phone"),n(),h(12,"input",7),u(13,B,3,1,"div",5),n(),o(14,"div")(15,"label",8),a(16,"city"),n(),h(17,"input",9),u(18,K,2,1,"div",5),n(),o(19,"button",10),a(20,"cheek out"),n()()()),s&2){let m,c,f;d(3),y("formGroup",r.ordras),d(5),p(8,(m=r.ordras.get("details"))!=null&&m.errors&&((m=r.ordras.get("details"))!=null&&m.touched||(m=r.ordras.get("details"))!=null&&m.dirty)?8:-1),d(5),p(13,(c=r.ordras.get("phone"))!=null&&c.errors&&((c=r.ordras.get("phone"))!=null&&c.touched||(c=r.ordras.get("phone"))!=null&&c.dirty)?13:-1),d(5),p(18,(f=r.ordras.get("city"))!=null&&f.errors&&((f=r.ordras.get("city"))!=null&&f.touched||(f=r.ordras.get("city"))!=null&&f.dirty)?18:-1),d(),y("disabled",r.ordras.invalid)}},dependencies:[j,k,A,F,I,D,G]});let e=t;return e})();export{te as OrdersComponent};
